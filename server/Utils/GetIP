const getRequestIpAddress = (req) => {
    const requestIpAddress =
        req.req.headers["X-Forwarded-For"] || req.req.connection.remoteAddress;
    if (!requestIpAddress) return null;

    const ipv4 = new RegExp(
        "(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?).){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",
    );

    const [ipAddress] = requestIpAddress.match(ipv4);

    return ipAddress;
};

export default getRequestIpAddress;
